# Testdekning

## Hva er testdekning?
La c være enten krav eller statements, da får vi at `C = (enheter testet) / (antall enheter)`. Testdekning er altså andelen testede enheter blandt alle enheter.

## Kategorier
Det er to hovedkategorier inn under testdekning:

* __Programbasert dekning:__
	Kategori relatert til testdekning på programkoden.

* __Spesifikasjonsbasert dekning:__
	Kategori relatert til testdekning på spesifikasjonene eller krav.

## Forskjellige typer testdekning
Programbasert testdekning deles opp i tre grunnleggende kategorier:

* __Statement__ 
	Prosentandel av statements i koden som blir testet

* __Branch (gren)__
	Prosentandel av code branches som blir testet

* __Grunnleggende stidekning (basic path coverage)__
	Prosentandel av grunnleggende stier i koden som blir testet.

## Begrenset anvendelighet
Når et testkriterium har begrenset anvendelighet, betyr det at kriteriumet kan bli tilfredstilt av et begrenset testsett. 

Testdekningskriteriet i dette eksempelet har begrenset anvendelighet, ved at kriteriene relateres til bare gjennomførbar kode. Så når "all kode" nevnes senere i kapittelet, menes det bare gjennomførbar (feasible) kode.

## Definisjoner
__Uttrykksdekning__ (statement coverage) angir antall testede kodeutrykk av alle kodeutrykk i prosent.

__Testdekning i code branches__ er antall testede stier i koden blandt alle mulige stier, i prosent.

__Basis-stidekning__ går ut på at man finner et basissett av stier i koden, dvs. det minste settet av stier man trenger for å gå alle mulige veier gjennom koden.

## Bruksområder
Det finnes mange måter å bruke dekningsverdiene på. Her vil vi se på to forskjellige bruksområder for testdekning:

* Som en akseptansetest
* For estimering av en eller flere kvalitetsfaktorer, f.eks. pålitelighet

### Akseptansetest
På høyere nivå er følgende veldig enkle akseptansekriterier:

1. Kjør en test suite
2. Har man nådd akseptansekravet, f.eks. 95% branch-dekning?
	* Ja - stopp testing
	* Nei - skriv flere tester. Det kan være lønnsomt å ha et verktøy som viser hva som ikke er testet, slik at man lettere kan velge nye test cases

Hvis man måler testdekning som et akseptansekriterie, er det viktig å unngå redundans. Da blir det lettere å identifisere kode som ikke er testet, og dermed lettere å finne nye test cases.

## Fault seeding
Konseptet går ut på at man:

1. Legger inn/"Sår" feil i koden
2. Kjører testsettet
3. En av to ting kan skje:
	* Alle innlagte feil blir oppdaget
	* En eller flere av de innlagte feilene blir ikke oppdaget

Når/hvis en eller flere av disse feilene ikke blir funnet av testen, viser det hvilke deler av koden som har til gode å bli testet. Denne informasjonen sørger for at man lettere kan definere nye test cases.

Det er et problem med fault seeding, og det er hvor og når man skal legge inn feil. Dette problemet har to løsninger:

* Lagre seed faults fra tidligere og bruke dem på nytt
* Bruk en erfaringsdatabase med vanlige feil og hvor de vanligvis opptrer, og lag en seed ut ifra denne databasen




